{
  "hash": "d185ee465b1965b5f37af98990b04560",
  "result": {
    "markdown": "\n\n# Exploratory and descriptive analysis with R \n\n\n## Working example - record sales data\n\n Let's import the data \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nAlbum_Sales <- read.csv(\"datasets/album_sales.csv\")\n```\n:::\n\n\n  Let's look at the data \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhead(Album_Sales)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|  Adverts| Sales| Airplay| Attract|Genre   |\n|--------:|-----:|-------:|-------:|:-------|\n|   10.256|   330|      43|      10|Country |\n|  985.685|   120|      28|       7|Pop     |\n| 1445.563|   360|      35|       7|HipHop  |\n| 1188.193|   270|      33|       7|HipHop  |\n|  574.513|   220|      44|       5|Metal   |\n|  568.954|   170|      19|       5|Country |\n\n</div>\n:::\n:::\n\n\n## Let's make sure our data types are correct #1 \n\n- This variable is currently stored as charcters, not as a factor / category variable\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nstr(Album_Sales$Genre) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n chr [1:200] \"Country\" \"Pop\" \"HipHop\" \"HipHop\" \"Metal\" \"Country\" \"Pop\" ...\n```\n:::\n:::\n\n\n- We can  save it as a factor\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nAlbum_Sales$Genre <- as.factor(Album_Sales$Genre)\n\nstr(Album_Sales$Genre) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Factor w/ 4 levels \"Country\",\"HipHop\",..: 1 4 2 2 3 1 4 4 3 2 ...\n```\n:::\n:::\n\n\n## Measures of central tendency\n\nThe main measures of central tendency are:\n- Mean\n- Median\n- Mode\n\n### Mean \n\n\"What is the mean of album sales?\"\n  \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmean(Album_Sales$Sales)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 193.2\n```\n:::\n:::\n\n\n### Trimmed mean \n\n- The trimmed mean is used to reduce the influence of outliers on the summary\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmean(Album_Sales$Sales, trim = 0.05)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 192.6667\n```\n:::\n:::\n\n\n### Median \n\n\"What is the median amount of Airplay?\"\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmedian(Album_Sales$Airplay)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 28\n```\n:::\n:::\n\n### Mode \n\n\"What is the most common attractiveness rating of bands?\"\n\n- The easiest way to get the mode in R is to generate a frequency table\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntable(Album_Sales$Attract)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n 1  2  3  4  5  6  7  8  9 10 \n 3  1  1  4 17 44 73 44 12  1 \n```\n:::\n:::\n\n- We can then look for the most frequently occuring response\n\n## Measures of dispresion or variance \n\n### Range  \n\nThe range is the difference between the lowest and highest values\n\n- You can calculate it using these values\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmax(Album_Sales$Airplay) - min(Album_Sales$Airplay)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 63\n```\n:::\n:::\n\n - Or you can use the range command to get the min and max values in one go\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrange(Album_Sales$Airplay)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1]  0 63\n```\n:::\n:::\n\n\n### Interquartile range \n\n- We know that the median is the \"middle\" of the data = 50th percentile\n- The interquatile range is the difference between the values at the 25th and 75th percentiles\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nquantile( x = Album_Sales$Airplay, probs = c(.25,.75) )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  25%   75% \n19.75 36.00 \n```\n:::\n:::\n\n\n- Interquartile range = 36 - 19.75 = 16.25\n\nSum of squares \n\n- The difference between each value and the mean value, squared, and then summed together\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsum( (Album_Sales$Adverts - mean(Album_Sales$Adverts))^2 )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 46936335\n```\n:::\n:::\n\n\n\n### Variance \n\n- Variance: Sum of sqaures divided by n-1\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# variance calculation\nvarianceAdverts <- sum( (Album_Sales$Adverts - mean(Album_Sales$Adverts))^2 ) / 199\n```\n:::\n\n\n\n### Standard deviation \n\n- Standard deviation is square root of the variance\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# sd calculation\n\n\nsqrt(varianceAdverts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 485.6552\n```\n:::\n:::\n\n- Can be calculated using the sd() command\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsd(Album_Sales$Adverts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 485.6552\n```\n:::\n:::\n\n\n## Skewness and Kurtosis \n\n### Assessing skewness of distribution #1\n- It is possible to use graphs to view the distribution\n- We will focus on graphic presentation of data next week\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhist(Album_Sales$Sales)\n```\n\n::: {.cell-output-display}\n![](descriptives_files/figure-html/unnamed-chunk-17-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n### Assessing skewness of distribution #2 \n\n- We can check raw skewness value using the *skew()* command in the **psych** package\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(psych)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'psych' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'psych'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:car':\n\n    logit\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:ggplot2':\n\n    %+%, alpha\n```\n:::\n\n```{.r .cell-code}\nskew(Album_Sales$Sales)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.0432729\n```\n:::\n:::\n\n\n### Kurtosis \n\n| informal term |technical name|   kurtosis value |\n|--:|--:|--:|\n|\"too flat\"|platykurtic|   negative|\n|  \"just pointy enough\"|  mesokurtic|  zero|\n| \"too pointy\" |leptokurtic |positive |\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nkurtosi(Album_Sales$Sales)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] -0.7157339\n```\n:::\n:::\n\n\n### Assessing normality of distribution \n \n- We can use the shapiro-wilk test of normality\n- This is part of \"base\" r (no package needed)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nshapiro.test(Album_Sales$Sales)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tShapiro-Wilk normality test\n\ndata:  Album_Sales$Sales\nW = 0.98479, p-value = 0.02965\n```\n:::\n:::\n\n\n## Getting and overall summary \n\n### summary() - in \"base R\" \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsummary(Album_Sales)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    Adverts             Sales          Airplay         Attract     \n Min.   :   9.104   Min.   : 10.0   Min.   : 0.00   Min.   : 1.00  \n 1st Qu.: 215.918   1st Qu.:137.5   1st Qu.:19.75   1st Qu.: 6.00  \n Median : 531.916   Median :200.0   Median :28.00   Median : 7.00  \n Mean   : 614.412   Mean   :193.2   Mean   :27.50   Mean   : 6.77  \n 3rd Qu.: 911.226   3rd Qu.:250.0   3rd Qu.:36.00   3rd Qu.: 8.00  \n Max.   :2271.860   Max.   :360.0   Max.   :63.00   Max.   :10.00  \n     Genre   \n Country:46  \n HipHop :53  \n Metal  :48  \n Pop    :53  \n             \n             \n```\n:::\n:::\n\n\n\n### describe() - in the \"psych\" package #1 \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndescribe(Album_Sales)\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|        | vars|   n|     mean|         sd|  median|   trimmed|      mad|    min|     max|    range|       skew|   kurtosis|         se|\n|:-------|----:|---:|--------:|----------:|-------:|---------:|--------:|------:|-------:|--------:|----------:|----------:|----------:|\n|Adverts |    1| 200| 614.4123| 485.655208| 531.916| 560.80516| 489.0882|  9.104| 2271.86| 2262.756|  0.8399360|  0.1687385| 34.3410091|\n|Sales   |    2| 200| 193.2000|  80.698957| 200.000| 192.68750|  88.9560| 10.000|  360.00|  350.000|  0.0432729| -0.7157339|  5.7062779|\n|Airplay |    3| 200|  27.5000|  12.269585|  28.000|  27.46250|  11.8608|  0.000|   63.00|   63.000|  0.0588275| -0.0924910|  0.8675907|\n|Attract |    4| 200|   6.7700|   1.395290|   7.000|   6.88125|   1.4826|  1.000|   10.00|    9.000| -1.2668371|  3.5555040|  0.0986619|\n|Genre*  |    5| 200|   2.5400|   1.115627|   3.000|   2.55000|   1.4826|  1.000|    4.00|    3.000| -0.0242500| -1.3661364|  0.0788867|\n\n</div>\n:::\n:::\n\n\n### describe() - in the \"psych\" package #2 \n\n- We can describe by factor variables \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndescribeBy(Album_Sales, group = Album_Sales$Genre)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n Descriptive statistics by group \ngroup: Country\n        vars  n   mean     sd median trimmed    mad  min     max   range  skew\nAdverts    1 46 656.22 507.96 574.14  620.40 581.96  9.1 1985.12 1976.01  0.51\nSales      2 46 201.74  73.64 210.00  200.79  66.72 60.0  360.00  300.00  0.03\nAirplay    3 46  29.07  10.53  28.00   28.50  11.12  9.0   54.00   45.00  0.44\nAttract    4 46   6.52   1.63   7.00    6.71   1.48  1.0   10.00    9.00 -1.49\nGenre*     5 46   1.00   0.00   1.00    1.00   0.00  1.0    1.00    0.00   NaN\n        kurtosis    se\nAdverts    -0.65 74.89\nSales      -0.52 10.86\nAirplay    -0.10  1.55\nAttract     3.54  0.24\nGenre*       NaN  0.00\n------------------------------------------------------------ \ngroup: HipHop\n        vars  n   mean     sd median trimmed    mad   min  max   range  skew\nAdverts    1 53 606.32 452.84 601.43  568.33 501.36 10.65 2000 1989.35  0.70\nSales      2 53 199.62  92.71 200.00  200.70 103.78 10.00  360  350.00 -0.10\nAirplay    3 53  28.09  13.86  30.00   28.33  14.83  0.00   55   55.00 -0.14\nAttract    4 53   6.96   1.13   7.00    7.00   1.48  3.00    9    6.00 -0.80\nGenre*     5 53   2.00   0.00   2.00    2.00   0.00  2.00    2    0.00   NaN\n        kurtosis    se\nAdverts     0.05 62.20\nSales      -0.91 12.74\nAirplay    -0.83  1.90\nAttract     2.03  0.15\nGenre*       NaN  0.00\n------------------------------------------------------------ \ngroup: Metal\n        vars  n   mean     sd median trimmed    mad  min     max   range  skew\nAdverts    1 48 693.45 534.06  593.0  640.19 521.34 45.3 2271.86 2226.56  0.92\nSales      2 48 197.71  75.18  200.0  198.25  88.96 40.0  340.00  300.00 -0.07\nAirplay    3 48  27.96  11.37   27.5   28.00  11.12  2.0   57.00   55.00  0.02\nAttract    4 48   6.85   1.34    7.0    6.90   1.48  2.0    9.00    7.00 -0.84\nGenre*     5 48   3.00   0.00    3.0    3.00   0.00  3.0    3.00    0.00   NaN\n        kurtosis    se\nAdverts     0.21 77.08\nSales      -0.94 10.85\nAirplay    -0.26  1.64\nAttract     1.74  0.19\nGenre*       NaN  0.00\n------------------------------------------------------------ \ngroup: Pop\n        vars  n   mean     sd median trimmed    mad   min     max   range  skew\nAdverts    1 53 514.63 446.04  429.5  453.85 438.01 15.31 1789.66 1774.35  1.01\nSales      2 53 175.28  77.92  160.0  171.86  88.96 40.00  360.00  320.00  0.34\nAirplay    3 53  25.13  12.75   26.0   25.02  11.86  1.00   63.00   62.00  0.25\nAttract    4 53   6.72   1.47    7.0    6.81   1.48  1.00    9.00    8.00 -1.11\nGenre*     5 53   4.00   0.00    4.0    4.00   0.00  4.00    4.00    0.00   NaN\n        kurtosis    se\nAdverts     0.27 61.27\nSales      -0.67 10.70\nAirplay     0.46  1.75\nAttract     2.51  0.20\nGenre*       NaN  0.00\n```\n:::\n:::\n\n\n\n## Basic statistical tests (more detail in later sections)\n\n### Corrleation \n\n\"Is there a relationship between advert spend and sales?\"\n\n- We would use an correlational analysis to answer this question\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot(Album_Sales$Sales,Album_Sales$Adverts)\n```\n\n::: {.cell-output-display}\n![](descriptives_files/figure-html/unnamed-chunk-24-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n\n\n\"Is there a relationship between advert spend and sales?\"\n\n- We would use an correlational analysis to answer this question\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncor.test(Album_Sales$Sales,Album_Sales$Adverts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tPearson's product-moment correlation\n\ndata:  Album_Sales$Sales and Album_Sales$Adverts\nt = 9.9793, df = 198, p-value < 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.4781207 0.6639409\nsample estimates:\n      cor \n0.5784877 \n```\n:::\n:::\n\n\n### Tests of difference - t-test \n\n\"Is there a significant difference in sales between the Country and Hip-hop musical genres?\"\n\n- We would use a t-test to answer this question\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmyTtestData <- Album_Sales %>% filter(Genre == c(\"Country\", \"HipHop\"))\n\nt.test(myTtestData$Sales ~ myTtestData$Genre)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tWelch Two Sample t-test\n\ndata:  myTtestData$Sales by myTtestData$Genre\nt = 0.80489, df = 40.62, p-value = 0.4256\nalternative hypothesis: true difference in means between group Country and group HipHop is not equal to 0\n95 percent confidence interval:\n -27.80146  64.62904\nsample estimates:\nmean in group Country  mean in group HipHop \n             216.0000              197.5862 \n```\n:::\n:::\n\n### Tests of difference - ANOVA \n\n\"Is there a significant difference in sales between all musical genres?\"\n\n- We would use an ANOVA to answer this question\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmyAnova <- aov(Album_Sales$Sales ~ Album_Sales$Genre)\nsummary(myAnova)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                   Df  Sum Sq Mean Sq F value Pr(>F)\nAlbum_Sales$Genre   3   23530    7843   1.208  0.308\nResiduals         196 1272422    6492               \n```\n:::\n:::\n",
    "supporting": [
      "descriptives_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}